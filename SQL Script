Create Database Smart_Club

go

use Smart_Club

CREATE TABLE Accounts
(
  Username VARCHAR(50) NOT NULL,
  Password VARCHAR(50) NOT NULL,
  Type VARCHAR(1) NOT NULL,
  PRIMARY KEY (Username)
);

CREATE TABLE Members
(
  Start_Date DATE NOT NULL,
  Sex char ,
  Status VARCHAR(20) NOT NULL,
  Age INT ,
  Name VARCHAR(50) NOT NULL,
  ID INT PRIMARY KEY IDENTITY(1,1) NOT NULL,
  MemberShip_Price INT NOT NULL,
  Username VARCHAR(50) NOT NULL,
  FOREIGN KEY (Username) REFERENCES Accounts(Username)
);

CREATE TABLE Events
(
  Event_id INT PRIMARY KEY IDENTITY(1,1) NOT NULL,
  Name VARCHAR (55) NOT NULL,
  Place VARCHAR (70),
  Date DATE NOT NULL,
  Likes INT DEFAULT 0 NOT NULL,
  Fees INT NOT NULL,
  Member_ID INT NOT NULL,
  FOREIGN KEY (Member_ID) REFERENCES Members(ID)
);

CREATE TABLE Reviews
(
  Review_id INT PRIMARY KEY IDENTITY(1,1) NOT NULL,
  Comment TEXT,
  Rating INT NOT NULL,
  Date DATE NOT NULL
);

CREATE TABLE Awards
(
  Award_ID INT PRIMARY KEY IDENTITY(1,1) NOT NULL,
  Name VARCHAR(50) NOT NULL,
);

CREATE TABLE Activites
(
  ID INT PRIMARY KEY IDENTITY(1,1) NOT NULL,
  Name VARCHAR (55) NOT NULL,
  Place VARCHAR (100) NOT NULL,
  Likes INT DEFAULT 0 NOT NULL,
);

CREATE TABLE Parking
(
  Start_Date DATE NOT NULL,
  Fees INT NOT NULL,
  Subscribtion_ID INT PRIMARY KEY IDENTITY(1,1) NOT NULL,
  End_Date DATE NOT NULL,
  Member_ID INT NOT NULL,
  FOREIGN KEY (Member_ID) REFERENCES Members(ID)
);

CREATE TABLE Teams
(
  Training_Time DATE NOT NULL,
  Size INT DEFAULT 0 NOT NULL,
  ID INT PRIMARY KEY IDENTITY(1,1) NOT NULL,
  Level INT NOT NULL,
);

CREATE TABLE Matches
(
  Match_ID INT PRIMARY KEY IDENTITY(1,1) NOT NULL,
  Time DATE NOT NULL,
  Place VARCHAR (55) ,
  Team_ID INT,
  FOREIGN KEY (Team_ID) REFERENCES Teams(ID),
);

CREATE TABLE Guest
(
  SSN INT PRIMARY KEY NOT NULL,
  Status VARCHAR (55) NOT NULL,
  Team_ID INT,
  FOREIGN KEY (Team_ID) REFERENCES Teams(ID)
);

CREATE TABLE Events_Reviews
(
  Event_ID INT NOT NULL,
  Review_ID INT NOT NULL,
  Member_ID INT NOT NULL,
  PRIMARY KEY (Event_ID, Review_ID, Member_ID),
  FOREIGN KEY (Event_ID) REFERENCES Events(Event_ID),
  FOREIGN KEY (Review_ID) REFERENCES Reviews(Review_ID),
  FOREIGN KEY (Member_ID) REFERENCES Members(ID)
);

CREATE TABLE Activites_Reviews
(
  Member_ID INT NOT NULL,
  Review_ID INT NOT NULL,
  Activity_ID INT NOT NULL,
  PRIMARY KEY (Member_ID, Review_ID, Activity_ID),
  FOREIGN KEY (Member_ID) REFERENCES Members(ID),
  FOREIGN KEY (Review_ID) REFERENCES Reviews(Review_ID),
  FOREIGN KEY (Activity_ID) REFERENCES Activites(ID)
);

CREATE TABLE Awards_Teams
(
  Team_ID INT NOT NULL,
  Award_ID INT NOT NULL,
  PRIMARY KEY (Team_ID, Award_ID),
  FOREIGN KEY (Team_ID) REFERENCES Teams(ID),
  FOREIGN KEY (Award_ID) REFERENCES Awards(Award_ID)
);



CREATE TABLE Employee
(
  SSN INT ,
  Fname VARCHAR (55) NOT NULL,
  Minit VARCHAR (10) ,
  Lname VARCHAR (55) ,
  Salary INT NOT NULL,
  Sex char NOT NULL,
  Super_SSN INT ,
  Username VARCHAR (50) NOT NULL,
  PRIMARY KEY (SSN),
  DNO int,
  FOREIGN KEY (Super_SSN) REFERENCES Employee(SSN),
  FOREIGN KEY (Username) REFERENCES Accounts(Username)
);
CREATE TABLE Department
(
  Building VARCHAR (55) NOT NULL,
  Name VARCHAR (55) NOT NULL,
  Number INT NOT NULL,
  Manager_SSN INT NOT NULL,
  PRIMARY KEY (Number),
  FOREIGN KEY (Manager_SSN) REFERENCES Employee,
  UNIQUE (Name)
);

CREATE TABLE Coaches
(
  SSN INT NOT NULL,
  Activity_ID INT NOT NULL,
  PRIMARY KEY (SSN, Activity_ID),
  FOREIGN KEY (SSN) REFERENCES Employee(SSN),
  FOREIGN KEY (Activity_ID) REFERENCES Activites(ID)
);

CREATE TABLE Team_Activity
(
  Team_ID INT NOT NULL,
  SSN INT NOT NULL,
  Activity_ID INT NOT NULL,
  PRIMARY KEY (Team_ID, SSN, Activity_ID),
  FOREIGN KEY (Team_ID) REFERENCES Teams(ID),
  FOREIGN KEY (SSN) REFERENCES Employee(SSN),
  FOREIGN KEY (Activity_ID) REFERENCES Activites(ID)
);
alter table Employee add foreign key (DNO) references Department(Number)
